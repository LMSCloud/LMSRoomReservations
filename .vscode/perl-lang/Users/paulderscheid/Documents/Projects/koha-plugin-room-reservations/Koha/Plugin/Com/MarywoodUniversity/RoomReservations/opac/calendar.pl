{"vars":[{"kind":2,"line":18,"name":"Perl","containerName":"Modern"},{"containerName":"","name":"Carp","line":20,"kind":2},{"line":21,"kind":2,"name":"Context","containerName":"C4"},{"name":"Output","kind":2,"line":22,"containerName":"C4"},{"name":"Auth","kind":2,"line":23,"containerName":"C4"},{"containerName":"Koha","name":"Email","kind":2,"line":24},{"line":25,"kind":2,"name":"Sendmail","containerName":"Mail"},{"containerName":"MIME","name":"QuotedPrint","line":26,"kind":2},{"containerName":"MIME","name":"Base64","kind":2,"line":27},{"containerName":"Koha","name":"Patrons","kind":2,"line":28},{"name":"Category","line":29,"kind":2,"containerName":"Koha::Patron"},{"name":"Categories","line":30,"kind":2,"containerName":"Koha::Patron"},{"containerName":"Koha","name":"DateUtils","line":31,"kind":2},{"containerName":"","kind":2,"line":32,"name":"Cwd"},{"name":"Basename","kind":2,"line":33,"containerName":"File"},{"containerName":"","name":"POSIX","kind":2,"line":34},{"containerName":"","name":"POSIX","line":35,"kind":2},{"line":36,"kind":2,"name":"DateTime","containerName":""},{"containerName":"","name":"CGI","line":38,"kind":2},{"containerName":"Locale","name":"Messages","kind":2,"line":40},{"containerName":"Messages","line":41,"kind":12,"name":"Locale"},{"containerName":"main::","name":"select_package","line":41,"kind":12},{"containerName":"Locale","name":"Messages","kind":2,"line":43},{"containerName":"Calendar","kind":2,"line":45,"name":"Simple"},{"line":46,"containerName":null,"kind":13,"name":"@months","definition":"my","localvar":"my"},{"name":"gettext","line":46,"kind":12},{"line":46,"kind":12,"name":"gettext"},{"name":"gettext","kind":12,"line":46},{"kind":12,"line":46,"name":"gettext"},{"name":"gettext","kind":12,"line":46},{"line":46,"kind":12,"name":"gettext"},{"kind":12,"line":46,"name":"gettext"},{"line":46,"kind":12,"name":"gettext"},{"name":"gettext","kind":12,"line":46},{"name":"gettext","kind":12,"line":46},{"name":"gettext","line":46,"kind":12},{"name":"gettext","kind":12,"line":46},{"definition":"my","localvar":"my","kind":13,"name":"$pluginDir","containerName":null,"line":48},{"line":48,"kind":12,"name":"dirname"},{"name":"abs_path","kind":12,"line":48},{"localvar":"my","definition":"my","name":"$template_name","kind":13,"containerName":null,"line":50},{"name":"$pluginDir","line":50,"kind":13,"containerName":null},{"definition":"my","localvar":"my","kind":13,"name":"$template2_name","containerName":null,"line":51},{"containerName":null,"name":"$pluginDir","kind":13,"line":51},{"kind":13,"name":"$rooms_table","definition":"my","localvar":"my","line":53,"containerName":null},{"definition":"my","localvar":"my","kind":13,"name":"$opening_hours_table","containerName":null,"line":54},{"name":"$bookings_table","kind":13,"localvar":"my","definition":"my","line":55,"containerName":null},{"containerName":null,"line":56,"localvar":"my","definition":"my","name":"$equipment_table","kind":13},{"containerName":null,"line":57,"definition":"my","localvar":"my","kind":13,"name":"$roomequipment_table"},{"line":59,"containerName":null,"kind":13,"name":"$valid","definition":"my","localvar":"my"},{"line":61,"containerName":null,"kind":13,"name":"$cgi","definition":"my","localvar":"my"},{"name":"new","kind":12,"line":61},{"name":"CGI","line":61,"kind":12},{"containerName":null,"line":65,"definition":"my","localvar":"my","kind":13,"name":"$op"},{"kind":13,"line":65,"name":"$cgi","containerName":null},{"containerName":"main::","name":"param","line":65,"kind":12},{"containerName":null,"line":67,"localvar":"my","definition":"my","name":"$template","kind":13},{"name":"$borrowernumber","line":67,"kind":13,"containerName":null},{"line":67,"kind":13,"name":"$cookie","containerName":null},{"name":"get_template_and_user","kind":12,"line":67},{"name":"template_name","kind":12,"line":69},{"name":"$template_name","line":69,"kind":13,"containerName":null},{"kind":12,"line":70,"name":"query"},{"containerName":null,"name":"$cgi","line":70,"kind":13},{"name":"type","kind":12,"line":71},{"line":72,"kind":12,"name":"authnotrequired"},{"name":"is_plugin","kind":12,"line":73},{"containerName":null,"line":77,"kind":13,"name":"$template"},{"containerName":"main::","name":"param","kind":12,"line":77},{"name":"language","kind":12,"line":78},{"kind":12,"line":78,"name":"C4","containerName":"Languages::getlanguage"},{"name":"$cgi","line":78,"kind":13,"containerName":null},{"name":"mbf_path","kind":12,"line":79},{"name":"abs_path","line":79,"kind":12},{"containerName":null,"kind":13,"line":82,"name":"%op"},{"definition":"my","localvar":"my","kind":13,"name":"$selected_mon_cnt","containerName":null,"line":83},{"name":"$cgi","line":83,"kind":13,"containerName":null},{"containerName":"main::","name":"param","line":83,"kind":12},{"containerName":null,"line":85,"localvar":"my","definition":"my","name":"@mon","kind":13},{"kind":13,"name":"@yr","definition":"my","localvar":"my","line":86,"containerName":null},{"line":88,"kind":13,"name":"%selected_mon_cnt","containerName":null},{"containerName":null,"line":89,"kind":13,"name":"$yr"},{"containerName":null,"line":89,"kind":13,"name":"$yr"},{"name":"floor","kind":12,"line":89},{"name":"$mon","line":89,"kind":13,"containerName":null},{"containerName":null,"name":"$selected_mon_cnt","line":89,"kind":13},{"line":90,"kind":13,"name":"$mon","containerName":null},{"containerName":null,"kind":13,"line":90,"name":"$mon"},{"name":"$selected_mon_cnt","kind":13,"line":90,"containerName":null},{"line":91,"kind":13,"name":"%mon","containerName":null},{"containerName":null,"name":"$mon","kind":13,"line":92},{"containerName":null,"line":96,"definition":"my","localvar":"my","kind":13,"name":"@month"},{"name":"calendar","line":96,"kind":12},{"kind":13,"line":96,"name":"$mon","containerName":null},{"line":96,"kind":13,"name":"$yr","containerName":null},{"line":97,"containerName":null,"name":"@month_days","kind":13,"localvar":"my","definition":"my"},{"containerName":null,"kind":13,"line":99,"name":"@month"},{"containerName":null,"name":"@month_days","line":100,"kind":13},{"name":"$_","line":100,"kind":13,"containerName":null},{"kind":13,"name":"$calendarBookings","definition":"my","localvar":"my","line":103,"containerName":null},{"name":"getConfirmedCalendarBookingsByMonthAndYear","kind":12,"line":103},{"containerName":null,"kind":13,"line":103,"name":"$mon"},{"containerName":null,"name":"$yr","line":103,"kind":13},{"kind":13,"name":"$dt","definition":"my","localvar":"my","line":105,"containerName":null},{"kind":12,"line":105,"name":"DateTime"},{"containerName":"main::","kind":12,"line":105,"name":"new"},{"line":106,"kind":12,"name":"year"},{"name":"$yr","line":106,"kind":13,"containerName":null},{"kind":12,"line":107,"name":"month"},{"containerName":null,"name":"$mon","kind":13,"line":107},{"kind":12,"line":108,"name":"day"},{"containerName":null,"line":110,"localvar":"my","definition":"my","name":"$dt_start","kind":13},{"kind":12,"line":110,"name":"DateTime"},{"kind":12,"line":110,"name":"new","containerName":"main::"},{"name":"year","line":111,"kind":12},{"containerName":null,"kind":13,"line":111,"name":"$yr"},{"kind":12,"line":112,"name":"month"},{"kind":13,"line":112,"name":"$mon","containerName":null},{"name":"day","kind":12,"line":113},{"containerName":null,"line":115,"localvar":"my","definition":"my","name":"$dt_end","kind":13},{"kind":12,"line":115,"name":"DateTime"},{"name":"new","line":115,"kind":12,"containerName":"main::"},{"line":116,"kind":12,"name":"year"},{"containerName":null,"line":116,"kind":13,"name":"$yr"},{"name":"month","kind":12,"line":117},{"containerName":null,"kind":13,"line":117,"name":"$mon"},{"kind":12,"line":118,"name":"day"},{"kind":13,"name":"@bookingDays","definition":"my","localvar":"my","line":120,"containerName":null},{"localvar":"my","definition":"my","name":"$month_day","kind":13,"containerName":null,"line":121},{"kind":13,"line":121,"name":"@month_days","containerName":null},{"kind":13,"name":"@dayBookings","definition":"my","localvar":"my","line":122,"containerName":null},{"name":"%month_day","kind":13,"line":123,"containerName":null},{"containerName":null,"name":"$dt","kind":13,"line":124},{"name":"set","line":124,"kind":12,"containerName":"main::"},{"kind":12,"line":124,"name":"day"},{"name":"$month_day","line":124,"kind":13,"containerName":null},{"line":125,"containerName":null,"kind":13,"name":"$booking","definition":"my","localvar":"my"},{"containerName":null,"name":"%calendarBookings","kind":13,"line":125},{"containerName":null,"name":"$dt_start","kind":13,"line":126},{"line":126,"kind":12,"name":"set","containerName":"main::"},{"name":"day","kind":12,"line":126},{"containerName":null,"line":126,"kind":13,"name":"%booking"},{"containerName":null,"kind":13,"line":127,"name":"$dt_start"},{"containerName":"main::","name":"set","kind":12,"line":127},{"name":"month","kind":12,"line":127},{"kind":13,"line":127,"name":"%booking","containerName":null},{"name":"$dt_start","line":128,"kind":13,"containerName":null},{"containerName":"main::","kind":12,"line":128,"name":"set"},{"kind":12,"line":128,"name":"year"},{"line":128,"kind":13,"name":"%booking","containerName":null},{"name":"$dt_end","line":129,"kind":13,"containerName":null},{"containerName":"main::","name":"set","line":129,"kind":12},{"line":129,"kind":12,"name":"day"},{"containerName":null,"line":129,"kind":13,"name":"%booking"},{"line":130,"kind":13,"name":"$dt_end","containerName":null},{"containerName":"main::","name":"set","line":130,"kind":12},{"name":"month","line":130,"kind":12},{"name":"%booking","kind":13,"line":130,"containerName":null},{"containerName":null,"line":131,"kind":13,"name":"$dt_end"},{"containerName":"main::","name":"set","kind":12,"line":131},{"kind":12,"line":131,"name":"year"},{"name":"%booking","line":131,"kind":13,"containerName":null},{"line":132,"kind":12,"name":"DateTime"},{"containerName":"main::","line":132,"kind":12,"name":"compare"},{"containerName":null,"line":132,"kind":13,"name":"$dt"},{"containerName":null,"name":"$dt_start","line":132,"kind":13},{"kind":12,"line":132,"name":"DateTime"},{"name":"compare","line":132,"kind":12,"containerName":"main::"},{"name":"$dt","kind":13,"line":132,"containerName":null},{"line":132,"kind":13,"name":"%dt_end","containerName":null},{"containerName":null,"name":"@dayBookings","line":133,"kind":13},{"containerName":null,"name":"$booking","line":133,"kind":13},{"kind":13,"line":137,"name":"@bookingDays","containerName":null},{"containerName":null,"line":137,"kind":13,"name":"@dayBookings"},{"line":140,"containerName":null,"name":"$month","kind":13,"localvar":"my","definition":"my"},{"containerName":null,"kind":13,"line":140,"name":"$mon"},{"kind":13,"name":"$userenv","definition":"my","localvar":"my","line":142,"containerName":null},{"kind":12,"line":142,"name":"C4","containerName":"Context"},{"kind":12,"line":142,"name":"userenv","containerName":"main::"},{"name":"$number","kind":13,"localvar":"my","definition":"my","line":143,"containerName":null},{"kind":13,"line":143,"name":"%userenv","containerName":null},{"name":"number","kind":12,"line":143},{"containerName":null,"line":144,"localvar":"my","definition":"my","name":"$patron","kind":13},{"containerName":"Patrons","kind":12,"line":144,"name":"Koha"},{"kind":12,"line":144,"name":"find","containerName":"main::"},{"kind":13,"line":144,"name":"$number","containerName":null},{"containerName":null,"line":145,"definition":"my","localvar":"my","kind":13,"name":"$category"},{"name":"$patron","kind":13,"line":145,"containerName":null},{"containerName":"main::","name":"category","line":145,"kind":12},{"line":145,"kind":12,"name":"categorycode","containerName":"main::"},{"kind":13,"name":"$isRestricted","definition":"my","localvar":"my","line":147,"containerName":null},{"name":"checkForRestrictedCategory","line":147,"kind":12},{"kind":13,"line":147,"name":"$category","containerName":null},{"name":"$restricted_message","kind":13,"localvar":"my","definition":"my","line":149,"containerName":null},{"kind":12,"line":149,"name":"getRestrictedMessage"},{"containerName":null,"name":"%isRestricted","line":151,"kind":13},{"containerName":null,"line":152,"kind":13,"name":"$template"},{"name":"param","line":152,"kind":12,"containerName":"main::"},{"name":"is_restricted","line":153,"kind":12},{"name":"is_restricted_message","line":154,"kind":12},{"containerName":null,"name":"$restricted_message","line":154,"kind":13},{"line":155,"kind":12,"name":"patron_category"},{"name":"%category","kind":13,"line":155,"containerName":null},{"line":159,"kind":13,"name":"$template","containerName":null},{"containerName":"main::","name":"param","kind":12,"line":159},{"name":"is_restricted","line":160,"kind":12},{"kind":12,"line":161,"name":"patron_category"},{"containerName":null,"line":161,"kind":13,"name":"$category"},{"localvar":"my","definition":"my","name":"$rooms","kind":13,"containerName":null,"line":165},{"name":"getAllRoomsWithEquipment","line":165,"kind":12},{"kind":13,"line":167,"name":"$template","containerName":null},{"containerName":"main::","name":"param","line":167,"kind":12},{"line":168,"kind":12,"name":"current_month_cal"},{"containerName":null,"line":168,"kind":13,"name":"@month_days"},{"name":"calendar_bookings","kind":12,"line":169},{"line":169,"kind":13,"name":"$calendarBookings","containerName":null},{"kind":12,"line":170,"name":"booking_days"},{"containerName":null,"line":170,"kind":13,"name":"@bookingDays"},{"kind":12,"line":171,"name":"active_month"},{"containerName":null,"name":"@months","kind":13,"line":171},{"kind":13,"line":171,"name":"$mon","containerName":null},{"name":"active_year","kind":12,"line":172},{"kind":13,"line":172,"name":"$yr","containerName":null},{"name":"month_is_active","line":173,"kind":12},{"name":"plugin_dir","kind":12,"line":174},{"containerName":null,"line":174,"kind":13,"name":"$pluginDir"},{"line":175,"kind":12,"name":"op"},{"line":175,"kind":13,"name":"$op","containerName":null},{"line":176,"kind":12,"name":"selected_mon_cnt"},{"containerName":null,"line":176,"kind":13,"name":"$selected_mon_cnt"},{"name":"rooms","kind":12,"line":177},{"containerName":null,"name":"$rooms","line":177,"kind":13},{"containerName":null,"kind":13,"line":180,"name":"%op"},{"line":182,"containerName":null,"name":"$equipment","kind":13,"localvar":"my","definition":"my"},{"line":182,"kind":12,"name":"loadAllEquipment"},{"line":184,"containerName":null,"kind":13,"name":"$rooms","definition":"my","localvar":"my"},{"line":184,"kind":12,"name":"getAllRoomsWithEquipment"},{"localvar":"my","definition":"my","name":"$max_num_days","kind":13,"containerName":null,"line":186},{"line":186,"kind":12,"name":"getFutureDays"},{"localvar":"my","definition":"my","name":"$max_time","kind":13,"containerName":null,"line":188},{"name":"getMaxTime","kind":12,"line":188},{"name":"%max_num_days","kind":13,"line":190,"containerName":null},{"name":"$max_num_days","line":191,"kind":13,"containerName":null},{"containerName":null,"line":194,"kind":13,"name":"%max_time"},{"kind":13,"line":195,"name":"$max_time","containerName":null},{"definition":"my","localvar":"my","kind":13,"name":"$submitCheckRoomAvailability","containerName":null,"line":198},{"containerName":null,"name":"$cgi","kind":13,"line":198},{"name":"param","kind":12,"line":198,"containerName":"main::"},{"line":200,"containerName":null,"name":"$openingHours","kind":13,"localvar":"my","definition":"my"},{"name":"getAllOpeningHours","kind":12,"line":200},{"name":"%submitCheckRoomAvailability","kind":13,"line":202,"containerName":null},{"containerName":null,"line":204,"localvar":"my","definition":"my","name":"$start_date","kind":13},{"containerName":null,"line":204,"kind":13,"name":"$cgi"},{"containerName":"main::","name":"param","line":204,"kind":12},{"containerName":null,"line":205,"definition":"my","localvar":"my","kind":13,"name":"$start_time"},{"containerName":null,"name":"$cgi","line":205,"kind":13},{"containerName":"main::","name":"param","line":205,"kind":12},{"localvar":"my","definition":"my","name":"$end_date","kind":13,"containerName":null,"line":207},{"kind":13,"line":207,"name":"$cgi","containerName":null},{"kind":12,"line":207,"name":"param","containerName":"main::"},{"line":208,"containerName":null,"name":"$end_time","kind":13,"localvar":"my","definition":"my"},{"name":"$cgi","line":208,"kind":13,"containerName":null},{"line":208,"kind":12,"name":"param","containerName":"main::"},{"localvar":"my","definition":"my","name":"$start_datetime","kind":13,"containerName":null,"line":210},{"line":210,"kind":12,"name":"dt_from_string"},{"containerName":null,"name":"$start_date","kind":13,"line":210},{"name":"$start_time","line":210,"kind":13,"containerName":null},{"line":211,"containerName":null,"kind":13,"name":"$end_datetime","definition":"my","localvar":"my"},{"name":"dt_from_string","line":211,"kind":12},{"line":211,"kind":13,"name":"$end_date","containerName":null},{"containerName":null,"line":211,"kind":13,"name":"$end_time"},{"localvar":"my","definition":"my","name":"$room_id","kind":13,"containerName":null,"line":213},{"containerName":null,"name":"$cgi","line":213,"kind":13},{"containerName":"main::","name":"param","line":213,"kind":12},{"line":215,"containerName":null,"name":"$roomIsAvailable","kind":13,"localvar":"my","definition":"my"},{"kind":12,"line":215,"name":"checkRoomAvailability"},{"containerName":null,"kind":13,"line":215,"name":"$room_id"},{"name":"$start_datetime","line":215,"kind":13,"containerName":null},{"name":"$end_datetime","kind":13,"line":215,"containerName":null},{"kind":13,"line":217,"name":"%roomIsAvailable","containerName":null},{"localvar":"my","definition":"my","name":"$displayed_start","kind":13,"containerName":null,"line":218},{"line":218,"kind":12,"name":"output_pref"},{"name":"dt","line":218,"kind":12},{"line":218,"kind":13,"name":"$start_datetime","containerName":null},{"containerName":null,"line":219,"definition":"my","localvar":"my","kind":13,"name":"$displayed_end"},{"kind":12,"line":219,"name":"output_pref"},{"name":"dt","line":219,"kind":12},{"name":"$end_datetime","kind":13,"line":219,"containerName":null},{"definition":"my","localvar":"my","kind":13,"name":"$displayed_event_time","containerName":null,"line":221},{"line":223,"containerName":null,"kind":13,"name":"$user_fn","definition":"my","localvar":"my"},{"containerName":"Context","name":"C4","kind":12,"line":223},{"containerName":"main::","name":"userenv","line":223,"kind":12},{"line":224,"containerName":null,"kind":13,"name":"$user_ln","definition":"my","localvar":"my"},{"name":"C4","kind":12,"line":224,"containerName":"Context"},{"name":"userenv","kind":12,"line":224,"containerName":"main::"},{"containerName":null,"line":225,"localvar":"my","definition":"my","name":"$user_bn","kind":13},{"name":"C4","kind":12,"line":225,"containerName":"Context"},{"name":"userenv","line":225,"kind":12,"containerName":"main::"},{"localvar":"my","definition":"my","name":"$user","kind":13,"containerName":null,"line":227},{"line":228,"containerName":null,"name":"$email","kind":13,"localvar":"my","definition":"my"},{"kind":12,"line":228,"name":"C4","containerName":"Context"},{"containerName":"main::","kind":12,"line":228,"name":"userenv"},{"name":"$selectedRoomNumber","kind":13,"localvar":"my","definition":"my","line":230,"containerName":null},{"name":"getRoomNumberById","kind":12,"line":230},{"line":230,"kind":13,"name":"$room_id","containerName":null},{"localvar":"my","definition":"my","name":"$count_limit","kind":13,"containerName":null,"line":232},{"name":"getDailyReservationLimit","line":232,"kind":12},{"containerName":null,"line":234,"localvar":"my","definition":"my","name":"$current_user_daily_limit","kind":13},{"line":234,"kind":12,"name":"getUserDailyResLimit"},{"containerName":null,"name":"$user_bn","kind":13,"line":234},{"containerName":null,"kind":13,"line":234,"name":"$start_date"},{"containerName":null,"line":236,"kind":13,"name":"$template"},{"kind":12,"line":236,"name":"param","containerName":"main::"},{"name":"op","kind":12,"line":237},{"name":"current_user","kind":12,"line":238},{"containerName":null,"line":238,"kind":13,"name":"$user"},{"name":"current_user_fn","line":239,"kind":12},{"kind":13,"line":239,"name":"$user_fn","containerName":null},{"name":"current_user_ln","line":240,"kind":12},{"containerName":null,"name":"$user_ln","kind":13,"line":240},{"name":"current_user_email","kind":12,"line":241},{"name":"$email","kind":13,"line":241,"containerName":null},{"name":"selected_room_id","line":242,"kind":12},{"kind":13,"line":242,"name":"$room_id","containerName":null},{"name":"selected_room_no","kind":12,"line":243},{"name":"$selectedRoomNumber","kind":13,"line":243,"containerName":null},{"name":"displayed_time","line":244,"kind":12},{"containerName":null,"kind":13,"line":244,"name":"$displayed_event_time"},{"kind":12,"line":245,"name":"selected_start_time"},{"name":"$start_datetime","kind":13,"line":245,"containerName":null},{"name":"selected_end_time","line":246,"kind":12},{"containerName":null,"name":"$end_datetime","kind":13,"line":246},{"kind":12,"line":247,"name":"displayed_start"},{"line":247,"kind":13,"name":"$displayed_start","containerName":null},{"line":248,"kind":12,"name":"displayed_end"},{"name":"$displayed_end","kind":13,"line":248,"containerName":null},{"name":"count_limit","line":249,"kind":12},{"kind":13,"line":249,"name":"$count_limit","containerName":null},{"name":"user_daily_limit","kind":12,"line":250},{"containerName":null,"name":"%current_user_daily_limit","kind":13,"line":250},{"containerName":null,"name":"$template","kind":13,"line":253},{"containerName":"main::","line":253,"kind":12,"name":"param"},{"name":"op","kind":12,"line":254},{"name":"$op","line":254,"kind":13,"containerName":null},{"line":255,"kind":12,"name":"room_checked"},{"kind":12,"line":256,"name":"rooms"},{"containerName":null,"kind":13,"line":256,"name":"$rooms"},{"kind":12,"line":257,"name":"available_room_equipment"},{"containerName":null,"name":"$equipment","line":257,"kind":13},{"name":"max_days","kind":12,"line":258},{"containerName":null,"name":"$max_num_days","line":258,"kind":13},{"name":"max_time","kind":12,"line":259},{"containerName":null,"name":"%max_time","kind":13,"line":259},{"name":"$template","line":263,"kind":13,"containerName":null},{"name":"param","kind":12,"line":263,"containerName":"main::"},{"name":"op","kind":12,"line":264},{"containerName":null,"name":"$op","kind":13,"line":264},{"kind":12,"line":265,"name":"room_checked"},{"name":"rooms","line":266,"kind":12},{"containerName":null,"line":266,"kind":13,"name":"$rooms"},{"name":"available_room_equipment","kind":12,"line":267},{"kind":13,"line":267,"name":"$equipment","containerName":null},{"line":268,"kind":12,"name":"max_days"},{"containerName":null,"kind":13,"line":268,"name":"$max_num_days"},{"kind":12,"line":269,"name":"max_time"},{"name":"$max_time","kind":13,"line":269,"containerName":null},{"name":"opening_hours","line":270,"kind":12},{"containerName":null,"kind":13,"line":270,"name":"$openingHours"},{"line":275,"kind":13,"name":"%op","containerName":null},{"localvar":"my","definition":"my","name":"$start_date","kind":13,"containerName":null,"line":277},{"name":"$cgi","line":277,"kind":13,"containerName":null},{"containerName":"main::","kind":12,"line":277,"name":"param"},{"containerName":null,"line":278,"definition":"my","localvar":"my","kind":13,"name":"$start_time"},{"containerName":null,"name":"$cgi","kind":13,"line":278},{"kind":12,"line":278,"name":"param","containerName":"main::"},{"name":"$end_date","kind":13,"localvar":"my","definition":"my","line":280,"containerName":null},{"containerName":null,"line":280,"kind":13,"name":"$cgi"},{"containerName":"main::","name":"param","kind":12,"line":280},{"containerName":null,"line":281,"definition":"my","localvar":"my","kind":13,"name":"$end_time"},{"containerName":null,"kind":13,"line":281,"name":"$cgi"},{"name":"param","kind":12,"line":281,"containerName":"main::"},{"containerName":null,"line":283,"localvar":"my","definition":"my","name":"$room_id","kind":13},{"name":"$cgi","kind":13,"line":283,"containerName":null},{"kind":12,"line":283,"name":"param","containerName":"main::"},{"name":"@equipment","kind":13,"localvar":"my","definition":"my","line":285,"containerName":null},{"containerName":null,"line":285,"kind":13,"name":"$cgi"},{"containerName":"main::","line":285,"kind":12,"name":"param"},{"containerName":null,"line":287,"localvar":"my","definition":"my","name":"$event_start","kind":13},{"name":"$start_date","kind":13,"line":287,"containerName":null},{"containerName":null,"kind":13,"line":287,"name":"$start_time"},{"definition":"my","localvar":"my","kind":13,"name":"$event_end","containerName":null,"line":288},{"line":288,"kind":13,"name":"$end_date","containerName":null},{"containerName":null,"name":"$end_time","kind":13,"line":288},{"localvar":"my","definition":"my","name":"$availability_format_start_date","kind":13,"containerName":null,"line":291},{"containerName":null,"kind":13,"line":291,"name":"$start_date"},{"containerName":null,"line":292,"localvar":"my","definition":"my","name":"$availability_format_end_date","kind":13},{"containerName":null,"kind":13,"line":292,"name":"$end_date"},{"name":"$availability_format_start_date","kind":13,"line":295,"containerName":null},{"containerName":null,"name":"$availability_format_start_date","line":295,"kind":13},{"containerName":null,"name":"$availability_format_end_date","kind":13,"line":296},{"line":296,"kind":13,"name":"$availability_format_end_date","containerName":null},{"containerName":null,"line":299,"definition":"my","localvar":"my","kind":13,"name":"$availability_format_start"},{"name":"$availability_format_start_date","line":299,"kind":13,"containerName":null},{"containerName":null,"name":"$start_time","kind":13,"line":299},{"definition":"my","localvar":"my","kind":13,"name":"$availability_format_end","containerName":null,"line":300},{"name":"$availability_format_end_date","kind":13,"line":300,"containerName":null},{"containerName":null,"name":"$end_time","line":300,"kind":13},{"kind":13,"line":303,"name":"$event_start","containerName":null},{"name":"dt_from_string","kind":12,"line":303},{"containerName":null,"kind":13,"line":303,"name":"$event_start"},{"line":304,"kind":13,"name":"$event_end","containerName":null},{"name":"dt_from_string","kind":12,"line":304},{"kind":13,"line":304,"name":"$event_end","containerName":null},{"line":306,"containerName":null,"kind":13,"name":"$displayed_event_start","definition":"my","localvar":"my"},{"kind":12,"line":306,"name":"output_pref"},{"kind":12,"line":306,"name":"dt"},{"containerName":null,"name":"$event_start","kind":13,"line":306},{"localvar":"my","definition":"my","name":"$displayed_event_end","kind":13,"containerName":null,"line":307},{"kind":12,"line":307,"name":"output_pref"},{"name":"dt","line":307,"kind":12},{"name":"$event_end","line":307,"kind":13,"containerName":null},{"name":"$roomIsAvailable","kind":13,"localvar":"my","definition":"my","line":309,"containerName":null},{"line":309,"kind":12,"name":"checkRoomAvailability"},{"containerName":null,"line":309,"kind":13,"name":"$room_id"},{"name":"$availability_format_start","kind":13,"line":309,"containerName":null},{"containerName":null,"name":"$availability_format_end","line":309,"kind":13},{"name":"$template","kind":13,"line":316,"containerName":null},{"containerName":"main::","name":"param","kind":12,"line":316},{"kind":12,"line":317,"name":"op"},{"containerName":null,"line":317,"kind":13,"name":"$op"},{"line":320,"kind":12,"name":"displayed_start"},{"line":320,"kind":13,"name":"$displayed_event_start","containerName":null},{"line":321,"kind":12,"name":"displayed_end"},{"line":321,"kind":13,"name":"$displayed_event_end","containerName":null},{"name":"event_start_time","line":322,"kind":12},{"containerName":null,"line":322,"kind":13,"name":"$event_start"},{"name":"event_end_time","line":323,"kind":12},{"containerName":null,"name":"$event_end","line":323,"kind":13},{"name":"start_date","line":324,"kind":12},{"containerName":null,"line":324,"kind":13,"name":"$availability_format_start_date"},{"containerName":null,"line":327,"kind":13,"name":"%op"},{"localvar":"my","definition":"my","name":"$selected_id","kind":13,"containerName":null,"line":329},{"containerName":null,"name":"$cgi","line":329,"kind":13},{"containerName":"main::","name":"param","line":329,"kind":12},{"line":330,"containerName":null,"kind":13,"name":"$displayed_start","definition":"my","localvar":"my"},{"line":330,"kind":13,"name":"$cgi","containerName":null},{"containerName":"main::","name":"param","line":330,"kind":12},{"definition":"my","localvar":"my","kind":13,"name":"$displayed_end","containerName":null,"line":331},{"containerName":null,"name":"$cgi","line":331,"kind":13},{"containerName":"main::","kind":12,"line":331,"name":"param"},{"kind":13,"name":"$event_start","definition":"my","localvar":"my","line":332,"containerName":null},{"containerName":null,"line":332,"kind":13,"name":"$cgi"},{"containerName":"main::","line":332,"kind":12,"name":"param"},{"line":333,"containerName":null,"name":"$event_end","kind":13,"localvar":"my","definition":"my"},{"containerName":null,"kind":13,"line":333,"name":"$cgi"},{"containerName":"main::","name":"param","kind":12,"line":333},{"containerName":null,"line":335,"localvar":"my","definition":"my","name":"$start_date","kind":13},{"containerName":null,"kind":13,"line":335,"name":"$cgi"},{"kind":12,"line":335,"name":"param","containerName":"main::"},{"definition":"my","localvar":"my","kind":13,"name":"$displayed_event_time","containerName":null,"line":337},{"definition":"my","localvar":"my","kind":13,"name":"$user_fn","containerName":null,"line":339},{"containerName":"Context","line":339,"kind":12,"name":"C4"},{"containerName":"main::","name":"userenv","line":339,"kind":12},{"line":340,"containerName":null,"name":"$user_ln","kind":13,"localvar":"my","definition":"my"},{"containerName":"Context","line":340,"kind":12,"name":"C4"},{"containerName":"main::","name":"userenv","line":340,"kind":12},{"name":"$user_bn","kind":13,"localvar":"my","definition":"my","line":341,"containerName":null},{"line":341,"kind":12,"name":"C4","containerName":"Context"},{"containerName":"main::","line":341,"kind":12,"name":"userenv"},{"line":343,"containerName":null,"name":"$user","kind":13,"localvar":"my","definition":"my"},{"line":344,"containerName":null,"kind":13,"name":"$email","definition":"my","localvar":"my"},{"containerName":"Context","name":"C4","kind":12,"line":344},{"line":344,"kind":12,"name":"userenv","containerName":"main::"},{"definition":"my","localvar":"my","kind":13,"name":"$selectedRoomNumber","containerName":null,"line":346},{"kind":12,"line":346,"name":"getRoomNumberById"},{"kind":13,"line":346,"name":"$selected_id","containerName":null},{"line":348,"containerName":null,"kind":13,"name":"$count_limit","definition":"my","localvar":"my"},{"kind":12,"line":348,"name":"getDailyReservationLimit"},{"line":350,"containerName":null,"name":"$current_user_daily_limit","kind":13,"localvar":"my","definition":"my"},{"name":"getUserDailyResLimit","kind":12,"line":350},{"kind":13,"line":350,"name":"$user_bn","containerName":null},{"name":"$start_date","line":350,"kind":13,"containerName":null},{"name":"$template","kind":13,"line":352,"containerName":null},{"containerName":"main::","line":352,"kind":12,"name":"param"},{"name":"op","kind":12,"line":353},{"containerName":null,"kind":13,"line":353,"name":"$op"},{"name":"current_user","kind":12,"line":354},{"kind":13,"line":354,"name":"$user","containerName":null},{"line":355,"kind":12,"name":"current_user_fn"},{"containerName":null,"kind":13,"line":355,"name":"$user_fn"},{"line":356,"kind":12,"name":"current_user_ln"},{"containerName":null,"line":356,"kind":13,"name":"$user_ln"},{"line":357,"kind":12,"name":"current_user_email"},{"containerName":null,"name":"$email","line":357,"kind":13},{"line":358,"kind":12,"name":"selected_room_id"},{"name":"$selected_id","line":358,"kind":13,"containerName":null},{"kind":12,"line":359,"name":"selected_room_no"},{"containerName":null,"line":359,"kind":13,"name":"$selectedRoomNumber"},{"line":360,"kind":12,"name":"displayed_time"},{"name":"$displayed_event_time","line":360,"kind":13,"containerName":null},{"name":"selected_start_time","line":361,"kind":12},{"containerName":null,"name":"$event_start","line":361,"kind":13},{"name":"selected_end_time","line":362,"kind":12},{"name":"$event_end","kind":13,"line":362,"containerName":null},{"kind":12,"line":363,"name":"displayed_start"},{"kind":13,"line":363,"name":"$displayed_start","containerName":null},{"name":"displayed_end","line":364,"kind":12},{"containerName":null,"line":364,"kind":13,"name":"$displayed_end"},{"name":"count_limit","line":365,"kind":12},{"kind":13,"line":365,"name":"$count_limit","containerName":null},{"kind":12,"line":366,"name":"user_daily_limit"},{"name":"$current_user_daily_limit","kind":13,"line":366,"containerName":null},{"containerName":null,"kind":13,"line":369,"name":"%op"},{"localvar":"my","definition":"my","name":"$borrowernumber","kind":13,"containerName":null,"line":371},{"containerName":"Context","line":371,"kind":12,"name":"C4"},{"containerName":"main::","name":"userenv","kind":12,"line":371},{"line":372,"containerName":null,"kind":13,"name":"$roomid","definition":"my","localvar":"my"},{"name":"$cgi","kind":13,"line":372,"containerName":null},{"name":"param","line":372,"kind":12,"containerName":"main::"},{"localvar":"my","definition":"my","name":"$start","kind":13,"containerName":null,"line":373},{"containerName":null,"line":373,"kind":13,"name":"$cgi"},{"containerName":"main::","name":"param","kind":12,"line":373},{"containerName":null,"line":374,"localvar":"my","definition":"my","name":"$end","kind":13},{"containerName":null,"name":"$cgi","line":374,"kind":13},{"name":"param","line":374,"kind":12,"containerName":"main::"},{"line":375,"containerName":null,"name":"$sendCopy","kind":13,"localvar":"my","definition":"my"},{"containerName":null,"kind":13,"line":375,"name":"$cgi"},{"name":"param","line":375,"kind":12,"containerName":"main::"},{"line":376,"containerName":null,"name":"$submitButton","kind":13,"localvar":"my","definition":"my"},{"containerName":null,"name":"$cgi","line":376,"kind":13},{"containerName":"main::","line":376,"kind":12,"name":"param"},{"localvar":"my","definition":"my","name":"$startOverButton","kind":13,"containerName":null,"line":377},{"containerName":null,"name":"$cgi","kind":13,"line":377},{"kind":12,"line":377,"name":"param","containerName":"main::"},{"definition":"my","localvar":"my","kind":13,"name":"$user","containerName":null,"line":378},{"name":"$cgi","kind":13,"line":378,"containerName":null},{"containerName":"main::","name":"param","kind":12,"line":378},{"definition":"my","localvar":"my","kind":13,"name":"$roomnumber","containerName":null,"line":379},{"containerName":null,"name":"$cgi","line":379,"kind":13},{"name":"param","kind":12,"line":379,"containerName":"main::"},{"definition":"my","localvar":"my","kind":13,"name":"$displayed_start","containerName":null,"line":380},{"containerName":null,"name":"$cgi","line":380,"kind":13},{"name":"param","line":380,"kind":12,"containerName":"main::"},{"name":"$displayed_end","kind":13,"localvar":"my","definition":"my","line":381,"containerName":null},{"containerName":null,"line":381,"kind":13,"name":"$cgi"},{"containerName":"main::","name":"param","kind":12,"line":381},{"line":382,"containerName":null,"name":"$patronEmail","kind":13,"localvar":"my","definition":"my"},{"line":382,"kind":13,"name":"$cgi","containerName":null},{"name":"param","kind":12,"line":382,"containerName":"main::"},{"kind":13,"name":"$admin_confirmation_email","definition":"my","localvar":"my","line":384,"containerName":null},{"containerName":"Context","name":"C4","line":384,"kind":12},{"containerName":"main::","name":"preference","line":384,"kind":12},{"containerName":null,"name":"%startOverButton","line":386,"kind":13},{"name":"$op","kind":13,"line":388,"containerName":null},{"name":"%submitButton","kind":13,"line":390,"containerName":null},{"containerName":null,"name":"$valid","line":392,"kind":13},{"name":"preBookingAvailabilityCheck","kind":12,"line":392},{"line":392,"kind":13,"name":"$roomid","containerName":null},{"name":"$start","kind":13,"line":392,"containerName":null},{"containerName":null,"line":392,"kind":13,"name":"$end"},{"name":"%valid","line":394,"kind":13,"containerName":null},{"name":"addBooking","line":395,"kind":12},{"line":395,"kind":13,"name":"$borrowernumber","containerName":null},{"containerName":null,"line":395,"kind":13,"name":"$roomid"},{"name":"$start","line":395,"kind":13,"containerName":null},{"name":"%end","line":395,"kind":13,"containerName":null},{"name":"$template","line":398,"kind":13,"containerName":null},{"containerName":"main::","name":"param","kind":12,"line":398},{"name":"invalid_booking","kind":12,"line":399},{"containerName":null,"kind":13,"line":404,"name":"$admin_confirmation_email"},{"name":"$admin_confirmation_email","kind":13,"line":404,"containerName":null},{"kind":13,"line":404,"name":"%valid","containerName":null},{"containerName":null,"line":406,"localvar":"my","definition":"my","name":"$email","kind":13},{"line":406,"kind":12,"name":"Koha","containerName":"Email"},{"containerName":"main::","name":"new","line":406,"kind":12},{"containerName":null,"line":407,"localvar":"my","definition":"my","name":"$user_email","kind":13},{"line":407,"kind":12,"name":"C4","containerName":"Context"},{"containerName":"main::","name":"preference","kind":12,"line":407},{"line":411,"containerName":null,"kind":13,"name":"%mail","definition":"my","localvar":"my"},{"containerName":null,"name":"$email","line":411,"kind":13},{"containerName":"main::","kind":12,"line":411,"name":"create_message_headers"},{"kind":12,"line":412,"name":"to"},{"line":412,"kind":13,"name":"$admin_confirmation_email","containerName":null},{"containerName":null,"line":414,"kind":13,"name":"%mail"},{"name":"C4","kind":12,"line":414,"containerName":"Context"},{"kind":12,"line":414,"name":"preference","containerName":"main::"},{"localvar":"my","definition":"my","name":"$template2","kind":13,"containerName":null,"line":418},{"containerName":"Templates::gettemplate","line":418,"kind":12,"name":"C4"},{"containerName":null,"name":"$template2_name","line":419,"kind":13},{"containerName":null,"name":"$cgi","line":419,"kind":13},{"kind":13,"name":"$timestamp","definition":"my","localvar":"my","line":422,"containerName":null},{"name":"getCurrentTimestamp","line":422,"kind":12},{"name":"$template2","line":424,"kind":13,"containerName":null},{"containerName":"main::","name":"param","line":424,"kind":12},{"line":425,"kind":12,"name":"user"},{"containerName":null,"line":425,"kind":13,"name":"$user"},{"kind":12,"line":426,"name":"room"},{"kind":13,"line":426,"name":"$roomnumber","containerName":null},{"name":"from","line":427,"kind":12},{"name":"$displayed_start","kind":13,"line":427,"containerName":null},{"kind":12,"line":428,"name":"to"},{"containerName":null,"name":"$displayed_end","line":428,"kind":13},{"name":"confirmed_timestamp","kind":12,"line":429},{"containerName":null,"name":"$timestamp","kind":13,"line":429},{"kind":12,"line":430,"name":"language"},{"line":430,"kind":12,"name":"C4","containerName":"Languages::getlanguage"},{"containerName":null,"name":"$cgi","line":430,"kind":13},{"name":"mbf_path","line":431,"kind":12},{"line":431,"kind":12,"name":"abs_path"},{"containerName":null,"line":435,"definition":"my","localvar":"my","kind":13,"name":"$template_res"},{"kind":13,"line":435,"name":"$template2","containerName":null},{"name":"output","line":435,"kind":12,"containerName":"main::"},{"containerName":null,"line":436,"definition":"my","localvar":"my","kind":13,"name":"$body"},{"containerName":null,"name":"%template_res","line":440,"kind":13},{"line":441,"kind":13,"name":"%mail","containerName":null},{"line":441,"kind":12,"name":"subject"},{"containerName":null,"name":"%mail","line":442,"kind":13},{"line":442,"kind":12,"name":"subject"},{"line":443,"kind":13,"name":"%mail","containerName":null},{"name":"subject","kind":12,"line":443},{"name":"Encode","kind":12,"line":443,"containerName":"encode"},{"line":443,"kind":13,"name":"%mail","containerName":null},{"name":"subject","kind":12,"line":443},{"containerName":null,"name":"%mail","line":445,"kind":13},{"localvar":"my","definition":"my","name":"$email_header","kind":13,"containerName":null,"line":447},{"name":"%template_res","kind":13,"line":449,"containerName":null},{"containerName":null,"line":450,"kind":13,"name":"$email_header"},{"containerName":null,"kind":13,"line":451,"name":"$email_header"},{"name":"$email_header","kind":13,"line":452,"containerName":null},{"kind":12,"line":452,"name":"encode_qp"},{"name":"Encode","line":452,"kind":12,"containerName":"encode"},{"containerName":null,"name":"$email_header","kind":13,"line":452},{"line":455,"containerName":null,"name":"$email_file","kind":13,"localvar":"my","definition":"my"},{"containerName":null,"line":456,"kind":13,"name":"%template_res"},{"containerName":null,"line":457,"kind":13,"name":"$email_file"},{"containerName":null,"line":458,"kind":13,"name":"$email_file"},{"containerName":null,"name":"%template_res","kind":13,"line":461},{"containerName":null,"name":"$body","kind":13,"line":462},{"name":"$body","kind":13,"line":463,"containerName":null},{"containerName":null,"kind":13,"line":464,"name":"$body"},{"name":"encode_qp","kind":12,"line":464},{"containerName":"encode","line":464,"kind":12,"name":"Encode"},{"kind":13,"line":464,"name":"$body","containerName":null},{"containerName":null,"line":467,"kind":13,"name":"%mail"},{"name":"body","kind":12,"line":467},{"containerName":null,"name":"$body","kind":13,"line":467},{"name":"$boundary","kind":13,"localvar":"my","definition":"my","line":469,"containerName":null},{"containerName":null,"kind":13,"line":471,"name":"%mail"},{"line":472,"kind":13,"name":"$boundary","containerName":null},{"containerName":null,"kind":13,"line":472,"name":"$boundary"},{"name":"%mail","kind":13,"line":473,"containerName":null},{"kind":12,"line":473,"name":"body"},{"kind":12,"line":499,"name":"sendmail"},{"name":"%mail","kind":13,"line":499,"containerName":null},{"name":"$template","line":501,"kind":13,"containerName":null},{"containerName":"main::","kind":12,"line":501,"name":"param"},{"kind":12,"line":502,"name":"SENT"},{"name":"patron_email","line":503,"kind":12},{"containerName":null,"kind":13,"line":503,"name":"%patronEmail"},{"name":"carp","kind":12,"line":508},{"kind":12,"line":509,"name":"carp"},{"line":509,"kind":13,"name":"$Mail","containerName":null},{"name":"Sendmail","line":509,"kind":12,"containerName":"error"},{"name":"$template","line":510,"kind":13,"containerName":null},{"containerName":"main::","name":"param","kind":12,"line":510},{"name":"error","kind":12,"line":510},{"containerName":null,"name":"$template","line":514,"kind":13},{"name":"param","line":514,"kind":12,"containerName":"main::"},{"kind":12,"line":515,"name":"op"},{"line":515,"kind":13,"name":"$op","containerName":null},{"containerName":null,"name":"$sendCopy","line":518,"kind":13},{"name":"%valid","kind":13,"line":518,"containerName":null},{"line":520,"containerName":null,"kind":13,"name":"$email","definition":"my","localvar":"my"},{"containerName":"Email","name":"Koha","kind":12,"line":520},{"containerName":"main::","name":"new","kind":12,"line":520},{"kind":13,"name":"$user_email","definition":"my","localvar":"my","line":521,"containerName":null},{"kind":12,"line":521,"name":"C4","containerName":"Context"},{"containerName":"main::","name":"preference","kind":12,"line":521},{"kind":13,"name":"%mail","definition":"my","localvar":"my","line":524,"containerName":null},{"name":"$email","kind":13,"line":524,"containerName":null},{"containerName":"main::","name":"create_message_headers","line":524,"kind":12},{"name":"to","kind":12,"line":525},{"line":525,"kind":13,"name":"$patronEmail","containerName":null},{"containerName":null,"name":"%mail","line":527,"kind":13},{"containerName":"Context","kind":12,"line":527,"name":"C4"},{"containerName":"main::","name":"preference","kind":12,"line":527},{"containerName":null,"line":531,"localvar":"my","definition":"my","name":"$template2","kind":13},{"containerName":"Templates::gettemplate","name":"C4","kind":12,"line":531},{"containerName":null,"name":"$template2_name","line":532,"kind":13},{"name":"$cgi","line":532,"kind":13,"containerName":null},{"line":535,"containerName":null,"name":"$timestamp","kind":13,"localvar":"my","definition":"my"},{"line":535,"kind":12,"name":"getCurrentTimestamp"},{"name":"$template2","line":537,"kind":13,"containerName":null},{"name":"param","line":537,"kind":12,"containerName":"main::"},{"name":"user","kind":12,"line":538},{"kind":13,"line":538,"name":"$user","containerName":null},{"kind":12,"line":539,"name":"room"},{"containerName":null,"name":"$roomnumber","line":539,"kind":13},{"name":"from","kind":12,"line":540},{"name":"$displayed_start","kind":13,"line":540,"containerName":null},{"kind":12,"line":541,"name":"to"},{"containerName":null,"name":"$displayed_end","line":541,"kind":13},{"name":"confirmed_timestamp","kind":12,"line":542},{"kind":13,"line":542,"name":"$timestamp","containerName":null},{"kind":12,"line":543,"name":"language"},{"name":"C4","kind":12,"line":543,"containerName":"Languages::getlanguage"},{"containerName":null,"line":543,"kind":13,"name":"$cgi"},{"name":"mbf_path","kind":12,"line":544},{"line":544,"kind":12,"name":"abs_path"},{"line":548,"containerName":null,"kind":13,"name":"$template_res","definition":"my","localvar":"my"},{"containerName":null,"kind":13,"line":548,"name":"$template2"},{"containerName":"main::","kind":12,"line":548,"name":"output"},{"line":549,"containerName":null,"kind":13,"name":"$body","definition":"my","localvar":"my"},{"containerName":null,"line":553,"kind":13,"name":"%template_res"},{"containerName":null,"name":"%mail","line":554,"kind":13},{"name":"subject","kind":12,"line":554},{"kind":13,"line":555,"name":"%mail","containerName":null},{"line":555,"kind":12,"name":"subject"},{"containerName":null,"name":"%mail","line":556,"kind":13},{"name":"subject","line":556,"kind":12},{"containerName":"encode","name":"Encode","kind":12,"line":556},{"containerName":null,"line":556,"kind":13,"name":"%mail"},{"line":556,"kind":12,"name":"subject"},{"line":558,"kind":13,"name":"%mail","containerName":null},{"kind":13,"name":"$email_header","definition":"my","localvar":"my","line":560,"containerName":null},{"containerName":null,"kind":13,"line":562,"name":"%template_res"},{"containerName":null,"name":"$email_header","kind":13,"line":563},{"kind":13,"line":564,"name":"$email_header","containerName":null},{"containerName":null,"name":"$email_header","line":565,"kind":13},{"line":565,"kind":12,"name":"encode_qp"},{"kind":12,"line":565,"name":"Encode","containerName":"encode"},{"kind":13,"line":565,"name":"$email_header","containerName":null},{"name":"$email_file","kind":13,"localvar":"my","definition":"my","line":568,"containerName":null},{"name":"%template_res","kind":13,"line":569,"containerName":null},{"containerName":null,"name":"$email_file","line":570,"kind":13},{"containerName":null,"line":571,"kind":13,"name":"$email_file"},{"name":"%template_res","line":574,"kind":13,"containerName":null},{"containerName":null,"name":"$body","kind":13,"line":575},{"containerName":null,"line":576,"kind":13,"name":"$body"},{"containerName":null,"kind":13,"line":577,"name":"$body"},{"kind":12,"line":577,"name":"encode_qp"},{"containerName":"encode","name":"Encode","line":577,"kind":12},{"containerName":null,"name":"$body","line":577,"kind":13},{"containerName":null,"line":580,"kind":13,"name":"%mail"},{"name":"body","line":580,"kind":12},{"name":"$body","kind":13,"line":580,"containerName":null},{"line":582,"containerName":null,"name":"$boundary","kind":13,"localvar":"my","definition":"my"},{"containerName":null,"line":584,"kind":13,"name":"%mail"},{"containerName":null,"kind":13,"line":585,"name":"$boundary"},{"containerName":null,"kind":13,"line":585,"name":"$boundary"},{"containerName":null,"name":"%mail","line":586,"kind":13},{"kind":12,"line":586,"name":"body"},{"line":612,"kind":12,"name":"sendmail"},{"name":"%mail","kind":13,"line":612,"containerName":null},{"kind":13,"line":614,"name":"$template","containerName":null},{"line":614,"kind":12,"name":"param","containerName":"main::"},{"name":"SENT","kind":12,"line":615},{"kind":12,"line":616,"name":"patron_email"},{"containerName":null,"kind":13,"line":616,"name":"%patronEmail"},{"name":"carp","kind":12,"line":621},{"name":"carp","line":622,"kind":12},{"kind":13,"line":622,"name":"$Mail","containerName":null},{"name":"Sendmail","line":622,"kind":12,"containerName":"error"},{"line":623,"kind":13,"name":"$template","containerName":null},{"containerName":"main::","name":"param","kind":12,"line":623},{"name":"error","kind":12,"line":623},{"containerName":null,"line":627,"kind":13,"name":"$template"},{"containerName":"main::","name":"param","kind":12,"line":627},{"name":"op","kind":12,"line":628},{"containerName":null,"kind":13,"line":628,"name":"$op"},{"kind":12,"detail":"($category)","name":"checkForRestrictedCategory","children":[{"line":634,"containerName":"checkForRestrictedCategory","kind":13,"name":"$category","definition":"my","localvar":"my"},{"containerName":"checkForRestrictedCategory","line":636,"definition":"my","localvar":"my","kind":13,"name":"$dbh"},{"containerName":"checkForRestrictedCategory","name":"dbh","line":636,"kind":12},{"line":638,"containerName":"checkForRestrictedCategory","name":"$sth","kind":13,"localvar":"my","definition":"my"},{"line":640,"containerName":"checkForRestrictedCategory","kind":13,"name":"$query","definition":"my","localvar":"my"},{"name":"$sth","kind":13,"line":649,"containerName":"checkForRestrictedCategory"},{"line":649,"kind":13,"name":"$dbh","containerName":"checkForRestrictedCategory"},{"kind":12,"line":649,"name":"prepare","containerName":"checkForRestrictedCategory"},{"line":649,"kind":13,"name":"$query","containerName":"checkForRestrictedCategory"},{"name":"$sth","kind":13,"line":650,"containerName":"checkForRestrictedCategory"},{"kind":12,"line":650,"name":"execute","containerName":"checkForRestrictedCategory"},{"containerName":"checkForRestrictedCategory","name":"$category","kind":13,"line":650},{"kind":13,"name":"$rows","definition":"my","localvar":"my","line":652,"containerName":"checkForRestrictedCategory"},{"containerName":"checkForRestrictedCategory","kind":13,"line":652,"name":"$sth"},{"kind":12,"line":652,"name":"fetchrow_arrayref","containerName":"checkForRestrictedCategory"},{"name":"$rows","kind":13,"line":654,"containerName":"checkForRestrictedCategory"}],"definition":"sub","signature":{"parameters":[{"label":"$category"}],"documentation":"","label":"checkForRestrictedCategory($category)"},"line":632,"range":{"start":{"line":632,"character":0},"end":{"character":9999,"line":660}},"containerName":"main::"},{"line":636,"kind":12,"name":"C4","containerName":"Context"},{"range":{"end":{"line":671,"character":9999},"start":{"character":0,"line":662}},"line":662,"containerName":"main::","name":"getRestrictedMessage","kind":12,"definition":"sub","children":[{"kind":13,"name":"$dbh","definition":"my","localvar":"my","line":664,"containerName":"getRestrictedMessage"},{"name":"dbh","line":664,"kind":12,"containerName":"getRestrictedMessage"},{"containerName":"getRestrictedMessage","line":665,"definition":"my","localvar":"my","kind":13,"name":"$sql"},{"kind":13,"name":"$sth","definition":"my","localvar":"my","line":666,"containerName":"getRestrictedMessage"},{"containerName":"getRestrictedMessage","name":"$dbh","kind":13,"line":666},{"containerName":"getRestrictedMessage","name":"prepare","kind":12,"line":666},{"line":666,"kind":13,"name":"$sql","containerName":"getRestrictedMessage"},{"name":"$sth","line":667,"kind":13,"containerName":"getRestrictedMessage"},{"name":"execute","kind":12,"line":667,"containerName":"getRestrictedMessage"},{"containerName":"getRestrictedMessage","line":668,"localvar":"my","definition":"my","name":"$row","kind":13},{"containerName":"getRestrictedMessage","name":"$sth","kind":13,"line":668},{"containerName":"getRestrictedMessage","line":668,"kind":12,"name":"fetchrow_hashref"},{"containerName":"getRestrictedMessage","name":"$row","line":670,"kind":13}]},{"name":"C4","kind":12,"line":664,"containerName":"Context"},{"line":673,"range":{"start":{"character":0,"line":673},"end":{"character":9999,"line":682}},"containerName":"main::","kind":12,"name":"getFutureDays","definition":"sub","children":[{"localvar":"my","definition":"my","name":"$dbh","kind":13,"containerName":"getFutureDays","line":675},{"kind":12,"line":675,"name":"dbh","containerName":"getFutureDays"},{"line":676,"containerName":"getFutureDays","name":"$sql","kind":13,"localvar":"my","definition":"my"},{"containerName":"getFutureDays","line":677,"localvar":"my","definition":"my","name":"$sth","kind":13},{"kind":13,"line":677,"name":"$dbh","containerName":"getFutureDays"},{"containerName":"getFutureDays","name":"prepare","kind":12,"line":677},{"containerName":"getFutureDays","name":"$sql","line":677,"kind":13},{"containerName":"getFutureDays","name":"$sth","kind":13,"line":678},{"kind":12,"line":678,"name":"execute","containerName":"getFutureDays"},{"definition":"my","localvar":"my","kind":13,"name":"$row","containerName":"getFutureDays","line":679},{"containerName":"getFutureDays","name":"$sth","kind":13,"line":679},{"line":679,"kind":12,"name":"fetchrow_hashref","containerName":"getFutureDays"},{"name":"$row","kind":13,"line":681,"containerName":"getFutureDays"}]},{"kind":12,"line":675,"name":"C4","containerName":"Context"},{"definition":"sub","children":[{"name":"$dbh","kind":13,"localvar":"my","definition":"my","line":686,"containerName":"getMaxTime"},{"line":686,"kind":12,"name":"dbh","containerName":"getMaxTime"},{"localvar":"my","definition":"my","name":"$sql","kind":13,"containerName":"getMaxTime","line":687},{"definition":"my","localvar":"my","kind":13,"name":"$sth","containerName":"getMaxTime","line":688},{"containerName":"getMaxTime","line":688,"kind":13,"name":"$dbh"},{"kind":12,"line":688,"name":"prepare","containerName":"getMaxTime"},{"containerName":"getMaxTime","name":"$sql","line":688,"kind":13},{"containerName":"getMaxTime","kind":13,"line":689,"name":"$sth"},{"containerName":"getMaxTime","name":"execute","kind":12,"line":689},{"containerName":"getMaxTime","line":690,"definition":"my","localvar":"my","kind":13,"name":"$row"},{"name":"$sth","kind":13,"line":690,"containerName":"getMaxTime"},{"line":690,"kind":12,"name":"fetchrow_hashref","containerName":"getMaxTime"},{"containerName":"getMaxTime","line":692,"kind":13,"name":"$row"}],"kind":12,"name":"getMaxTime","containerName":"main::","line":684,"range":{"start":{"line":684,"character":0},"end":{"line":693,"character":9999}}},{"containerName":"Context","name":"C4","line":686,"kind":12},{"children":[{"name":"$dbh","kind":13,"localvar":"my","definition":"my","line":697,"containerName":"getDailyReservationLimit"},{"kind":12,"line":697,"name":"dbh","containerName":"getDailyReservationLimit"},{"line":698,"containerName":"getDailyReservationLimit","name":"$sql","kind":13,"localvar":"my","definition":"my"},{"name":"$sth","kind":13,"localvar":"my","definition":"my","line":699,"containerName":"getDailyReservationLimit"},{"containerName":"getDailyReservationLimit","line":699,"kind":13,"name":"$dbh"},{"containerName":"getDailyReservationLimit","name":"prepare","line":699,"kind":12},{"name":"$sql","line":699,"kind":13,"containerName":"getDailyReservationLimit"},{"name":"$sth","line":700,"kind":13,"containerName":"getDailyReservationLimit"},{"containerName":"getDailyReservationLimit","kind":12,"line":700,"name":"execute"},{"kind":13,"name":"$row","definition":"my","localvar":"my","line":701,"containerName":"getDailyReservationLimit"},{"name":"$sth","line":701,"kind":13,"containerName":"getDailyReservationLimit"},{"line":701,"kind":12,"name":"fetchrow_hashref","containerName":"getDailyReservationLimit"},{"containerName":"getDailyReservationLimit","name":"$row","line":703,"kind":13}],"definition":"sub","kind":12,"name":"getDailyReservationLimit","containerName":"main::","line":695,"range":{"start":{"line":695,"character":0},"end":{"character":9999,"line":704}}},{"containerName":"Context","name":"C4","kind":12,"line":697},{"containerName":"main::","line":706,"range":{"end":{"character":9999,"line":719},"start":{"line":706,"character":0}},"children":[{"line":708,"containerName":"getUserDailyResLimit","kind":13,"name":"$bn","definition":"my","localvar":"my"},{"line":708,"kind":13,"name":"$date","containerName":"getUserDailyResLimit"},{"name":"$date","kind":13,"line":710,"containerName":"getUserDailyResLimit"},{"definition":"my","localvar":"my","kind":13,"name":"$dbh","containerName":"getUserDailyResLimit","line":712},{"line":712,"kind":12,"name":"dbh","containerName":"getUserDailyResLimit"},{"containerName":"getUserDailyResLimit","line":713,"localvar":"my","definition":"my","name":"$sql","kind":13},{"localvar":"my","definition":"my","name":"$sth","kind":13,"containerName":"getUserDailyResLimit","line":714},{"name":"$dbh","kind":13,"line":714,"containerName":"getUserDailyResLimit"},{"kind":12,"line":714,"name":"prepare","containerName":"getUserDailyResLimit"},{"containerName":"getUserDailyResLimit","kind":13,"line":714,"name":"$sql"},{"name":"$sth","line":715,"kind":13,"containerName":"getUserDailyResLimit"},{"kind":12,"line":715,"name":"execute","containerName":"getUserDailyResLimit"},{"containerName":"getUserDailyResLimit","name":"$bn","line":715,"kind":13},{"containerName":"getUserDailyResLimit","line":715,"kind":13,"name":"$date"},{"localvar":"my","definition":"my","name":"$row","kind":13,"containerName":"getUserDailyResLimit","line":716},{"containerName":"getUserDailyResLimit","line":716,"kind":13,"name":"$sth"},{"name":"fetchrow_hashref","kind":12,"line":716,"containerName":"getUserDailyResLimit"},{"containerName":"getUserDailyResLimit","kind":13,"line":718,"name":"$row"}],"definition":"sub","signature":{"documentation":"","label":"getUserDailyResLimit($bn,$date)","parameters":[{"label":"$bn"},{"label":"$date"}]},"detail":"($bn,$date)","kind":12,"name":"getUserDailyResLimit"},{"containerName":"Context","line":712,"kind":12,"name":"C4"},{"containerName":"main::","line":721,"range":{"end":{"line":733,"character":9999},"start":{"line":721,"character":0}},"definition":"sub","children":[{"containerName":"areAnyRoomsAvailable","line":723,"localvar":"my","definition":"my","name":"$rooms","kind":13},{"containerName":"areAnyRoomsAvailable","line":725,"kind":13,"name":"$rooms"}],"signature":{"label":"areAnyRoomsAvailable($rooms)","documentation":"","parameters":[{"label":"$rooms"}]},"detail":"($rooms)","kind":12,"name":"areAnyRoomsAvailable"},{"range":{"start":{"line":735,"character":0},"end":{"line":785,"character":9999}},"line":735,"containerName":"main::","name":"getConfirmedCalendarBookingsByMonthAndYear","detail":"($month,$year)","kind":12,"signature":{"parameters":[{"label":"$month"},{"label":"$year"}],"label":"getConfirmedCalendarBookingsByMonthAndYear($month,$year)","documentation":""},"children":[{"name":"$month","kind":13,"localvar":"my","definition":"my","line":737,"containerName":"getConfirmedCalendarBookingsByMonthAndYear"},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","name":"$year","line":737,"kind":13},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","name":"$month","line":740,"kind":13},{"name":"$month","line":740,"kind":13,"containerName":"getConfirmedCalendarBookingsByMonthAndYear"},{"line":743,"containerName":"getConfirmedCalendarBookingsByMonthAndYear","kind":13,"name":"$dbh","definition":"my","localvar":"my"},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","name":"dbh","kind":12,"line":743},{"kind":13,"name":"$sth","definition":"my","localvar":"my","line":746,"containerName":"getConfirmedCalendarBookingsByMonthAndYear"},{"line":759,"containerName":"getConfirmedCalendarBookingsByMonthAndYear","name":"$query","kind":13,"localvar":"my","definition":"my"},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","name":"$sth","line":775,"kind":13},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","name":"$dbh","line":775,"kind":13},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","name":"prepare","kind":12,"line":775},{"name":"$query","line":775,"kind":13,"containerName":"getConfirmedCalendarBookingsByMonthAndYear"},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","kind":13,"line":776,"name":"$sth"},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","kind":12,"line":776,"name":"execute"},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","line":778,"definition":"my","localvar":"my","kind":13,"name":"@calendarBookings"},{"name":"$row","kind":13,"localvar":"my","definition":"my","line":780,"containerName":"getConfirmedCalendarBookingsByMonthAndYear"},{"name":"$sth","kind":13,"line":780,"containerName":"getConfirmedCalendarBookingsByMonthAndYear"},{"name":"fetchrow_hashref","kind":12,"line":780,"containerName":"getConfirmedCalendarBookingsByMonthAndYear"},{"name":"@calendarBookings","kind":13,"line":781,"containerName":"getConfirmedCalendarBookingsByMonthAndYear"},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","name":"$row","line":781,"kind":13},{"containerName":"getConfirmedCalendarBookingsByMonthAndYear","line":784,"kind":13,"name":"@calendarBookings"}],"definition":"sub"},{"containerName":"Context","line":743,"kind":12,"name":"C4"},{"name":"preBookingAvailabilityCheck","kind":12,"detail":"($roomid,$start,$end)","signature":{"parameters":[{"label":"$roomid"},{"label":"$start"},{"label":"$end"}],"label":"preBookingAvailabilityCheck($roomid,$start,$end)","documentation":""},"definition":"sub","children":[{"line":788,"containerName":"preBookingAvailabilityCheck","kind":13,"name":"$roomid","definition":"my","localvar":"my"},{"containerName":"preBookingAvailabilityCheck","kind":13,"line":788,"name":"$start"},{"name":"$end","kind":13,"line":788,"containerName":"preBookingAvailabilityCheck"},{"line":790,"containerName":"preBookingAvailabilityCheck","kind":13,"name":"$dbh","definition":"my","localvar":"my"},{"containerName":"preBookingAvailabilityCheck","line":790,"kind":12,"name":"dbh"},{"line":793,"containerName":"preBookingAvailabilityCheck","kind":13,"name":"$sth","definition":"my","localvar":"my"},{"containerName":"preBookingAvailabilityCheck","line":795,"localvar":"my","definition":"my","name":"$query","kind":13},{"name":"$sth","line":803,"kind":13,"containerName":"preBookingAvailabilityCheck"},{"name":"$dbh","line":803,"kind":13,"containerName":"preBookingAvailabilityCheck"},{"line":803,"kind":12,"name":"prepare","containerName":"preBookingAvailabilityCheck"},{"line":803,"kind":13,"name":"$query","containerName":"preBookingAvailabilityCheck"},{"containerName":"preBookingAvailabilityCheck","name":"$sth","line":804,"kind":13},{"kind":12,"line":804,"name":"execute","containerName":"preBookingAvailabilityCheck"},{"line":806,"containerName":"preBookingAvailabilityCheck","name":"$count","kind":13,"localvar":"my","definition":"my"},{"name":"$sth","line":806,"kind":13,"containerName":"preBookingAvailabilityCheck"},{"containerName":"preBookingAvailabilityCheck","name":"fetchrow_array","line":806,"kind":12},{"containerName":"preBookingAvailabilityCheck","name":"$count","kind":13,"line":808}],"range":{"end":{"character":9999,"line":814},"start":{"character":0,"line":787}},"line":787,"containerName":"main::"},{"name":"C4","line":790,"kind":12,"containerName":"Context"},{"name":"addBooking","detail":"($borrowernumber,$roomid,$start,$end)","kind":12,"signature":{"label":"addBooking($borrowernumber,$roomid,$start,$end)","documentation":"","parameters":[{"label":"$borrowernumber"},{"label":"$roomid"},{"label":"$start"},{"label":"$end"}]},"children":[{"line":818,"containerName":"addBooking","name":"$borrowernumber","kind":13,"localvar":"my","definition":"my"},{"containerName":"addBooking","line":818,"kind":13,"name":"$roomid"},{"name":"$start","line":818,"kind":13,"containerName":"addBooking"},{"name":"$end","kind":13,"line":818,"containerName":"addBooking"},{"containerName":"addBooking","line":820,"localvar":"my","definition":"my","name":"$dbh","kind":13},{"containerName":"addBooking","line":820,"kind":12,"name":"dbh"},{"name":"$dbh","line":822,"kind":13,"containerName":"addBooking"},{"containerName":"addBooking","kind":12,"line":822,"name":"do"},{"line":824,"kind":13,"name":"$start","containerName":"addBooking"},{"containerName":"addBooking","kind":13,"line":824,"name":"$end"}],"definition":"sub","range":{"end":{"character":9999,"line":825},"start":{"character":0,"line":816}},"line":816,"containerName":"main::"},{"name":"C4","kind":12,"line":820,"containerName":"Context"},{"definition":"sub","children":[{"containerName":"getRoomNumberById","line":829,"localvar":"my","definition":"my","name":"$roomid","kind":13},{"line":832,"containerName":"getRoomNumberById","kind":13,"name":"$dbh","definition":"my","localvar":"my"},{"name":"dbh","line":832,"kind":12,"containerName":"getRoomNumberById"},{"line":835,"containerName":"getRoomNumberById","kind":13,"name":"$sth","definition":"my","localvar":"my"},{"name":"$query","kind":13,"localvar":"my","definition":"my","line":837,"containerName":"getRoomNumberById"},{"containerName":"getRoomNumberById","kind":13,"line":843,"name":"$sth"},{"name":"$dbh","kind":13,"line":843,"containerName":"getRoomNumberById"},{"name":"prepare","kind":12,"line":843,"containerName":"getRoomNumberById"},{"kind":13,"line":843,"name":"$query","containerName":"getRoomNumberById"},{"kind":13,"line":844,"name":"$sth","containerName":"getRoomNumberById"},{"containerName":"getRoomNumberById","name":"execute","line":844,"kind":12},{"definition":"my","localvar":"my","kind":13,"name":"@roomNumberFromId","containerName":"getRoomNumberById","line":846},{"kind":13,"name":"$row","definition":"my","localvar":"my","line":848,"containerName":"getRoomNumberById"},{"kind":13,"line":848,"name":"$sth","containerName":"getRoomNumberById"},{"name":"fetchrow_hashref","line":848,"kind":12,"containerName":"getRoomNumberById"},{"containerName":"getRoomNumberById","kind":13,"line":849,"name":"@roomNumberFromId"},{"name":"$row","line":849,"kind":13,"containerName":"getRoomNumberById"},{"containerName":"getRoomNumberById","kind":13,"line":852,"name":"@roomNumberFromId"}],"signature":{"documentation":"","label":"getRoomNumberById($roomid)","parameters":[{"label":"$roomid"}]},"kind":12,"detail":"($roomid)","name":"getRoomNumberById","containerName":"main::","line":827,"range":{"start":{"character":0,"line":827},"end":{"line":853,"character":9999}}},{"containerName":"Context","name":"C4","line":832,"kind":12},{"kind":12,"detail":"($datetime)","name":"checkOpeningHours","children":[{"name":"$datetime","kind":13,"localvar":"my","definition":"my","line":856,"containerName":"checkOpeningHours"},{"line":857,"containerName":"checkOpeningHours","name":"$result","kind":13,"localvar":"my","definition":"my"},{"kind":13,"name":"$dbh","definition":"my","localvar":"my","line":860,"containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","line":860,"kind":12,"name":"dbh"},{"definition":"my","localvar":"my","kind":13,"name":"$sth","containerName":"checkOpeningHours","line":863},{"containerName":"checkOpeningHours","line":865,"localvar":"my","definition":"my","name":"$weekday","kind":13},{"kind":13,"line":865,"name":"$datetime","containerName":"checkOpeningHours"},{"name":"day_of_week","kind":12,"line":865,"containerName":"checkOpeningHours"},{"name":"$query","kind":13,"localvar":"my","definition":"my","line":867,"containerName":"checkOpeningHours"},{"line":872,"kind":13,"name":"$sth","containerName":"checkOpeningHours"},{"line":872,"kind":13,"name":"$dbh","containerName":"checkOpeningHours"},{"kind":12,"line":872,"name":"prepare","containerName":"checkOpeningHours"},{"kind":13,"line":872,"name":"$query","containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","name":"$sth","kind":13,"line":873},{"line":873,"kind":12,"name":"execute","containerName":"checkOpeningHours"},{"line":875,"containerName":"checkOpeningHours","kind":13,"name":"@allOpeningsOnWeekday","definition":"my","localvar":"my"},{"containerName":"checkOpeningHours","line":877,"localvar":"my","definition":"my","name":"$row","kind":13},{"name":"$sth","kind":13,"line":877,"containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","kind":12,"line":877,"name":"fetchrow_hashref"},{"line":878,"kind":13,"name":"@allOpeningsOnWeekday","containerName":"checkOpeningHours"},{"name":"$row","line":878,"kind":13,"containerName":"checkOpeningHours"},{"line":881,"containerName":"checkOpeningHours","kind":13,"name":"$openingHour","definition":"my","localvar":"my"},{"kind":13,"line":881,"name":"@allOpeningsOnWeekday","containerName":"checkOpeningHours"},{"line":883,"containerName":"checkOpeningHours","name":"@times","kind":13,"localvar":"my","definition":"my"},{"containerName":"checkOpeningHours","name":"$openingHour","kind":13,"line":883},{"line":884,"containerName":"checkOpeningHours","name":"$dt_start","kind":13,"localvar":"my","definition":"my"},{"containerName":"checkOpeningHours","name":"new","line":884,"kind":12},{"containerName":"checkOpeningHours","name":"$datetime","kind":13,"line":885},{"line":885,"kind":12,"name":"year","containerName":"checkOpeningHours"},{"name":"$datetime","line":886,"kind":13,"containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","kind":12,"line":886,"name":"month"},{"containerName":"checkOpeningHours","line":887,"kind":13,"name":"$datetime"},{"containerName":"checkOpeningHours","name":"day","line":887,"kind":12},{"containerName":"checkOpeningHours","name":"$times","kind":13,"line":888},{"containerName":"checkOpeningHours","line":889,"kind":13,"name":"$times"},{"containerName":"checkOpeningHours","name":"@times","kind":13,"line":892},{"name":"$openingHour","kind":13,"line":892,"containerName":"checkOpeningHours"},{"kind":13,"name":"$dt_end","definition":"my","localvar":"my","line":893,"containerName":"checkOpeningHours"},{"name":"new","kind":12,"line":893,"containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","line":894,"kind":13,"name":"$datetime"},{"line":894,"kind":12,"name":"year","containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","name":"$datetime","line":895,"kind":13},{"kind":12,"line":895,"name":"month","containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","kind":13,"line":896,"name":"$datetime"},{"containerName":"checkOpeningHours","name":"day","line":896,"kind":12},{"kind":13,"line":897,"name":"$times","containerName":"checkOpeningHours"},{"name":"$times","kind":13,"line":898,"containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","name":"compare","kind":12,"line":901},{"name":"$datetime","line":901,"kind":13,"containerName":"checkOpeningHours"},{"containerName":"checkOpeningHours","line":901,"kind":13,"name":"$dt_start"},{"containerName":"checkOpeningHours","name":"compare","line":901,"kind":12},{"name":"$datetime","kind":13,"line":901,"containerName":"checkOpeningHours"},{"line":901,"kind":13,"name":"$dt_end","containerName":"checkOpeningHours"},{"line":902,"kind":13,"name":"$result","containerName":"checkOpeningHours"},{"name":"$result","kind":13,"line":907,"containerName":"checkOpeningHours"}],"definition":"sub","signature":{"documentation":"","label":"checkOpeningHours($datetime)","parameters":[{"label":"$datetime"}]},"line":855,"range":{"start":{"line":855,"character":0},"end":{"character":9999,"line":908}},"containerName":"main::"},{"line":860,"kind":12,"name":"C4","containerName":"Context"},{"name":"start","kind":12,"line":883},{"name":"DateTime","kind":12,"line":884},{"name":"year","line":885,"kind":12},{"name":"month","line":886,"kind":12},{"line":887,"kind":12,"name":"day"},{"name":"hour","kind":12,"line":888},{"line":889,"kind":12,"name":"minute"},{"name":"end","kind":12,"line":892},{"name":"DateTime","kind":12,"line":893},{"line":894,"kind":12,"name":"year"},{"kind":12,"line":895,"name":"month"},{"line":896,"kind":12,"name":"day"},{"name":"hour","line":897,"kind":12},{"line":898,"kind":12,"name":"minute"},{"name":"DateTime","kind":12,"line":901},{"kind":12,"line":901,"name":"DateTime"},{"detail":"($room_id,$start,$end)","kind":12,"name":"checkRoomAvailability","definition":"sub","children":[{"name":"$room_id","kind":13,"localvar":"my","definition":"my","line":912,"containerName":"checkRoomAvailability"},{"kind":13,"line":912,"name":"$start","containerName":"checkRoomAvailability"},{"containerName":"checkRoomAvailability","line":912,"kind":13,"name":"$end"},{"line":915,"kind":13,"name":"$start","containerName":"checkRoomAvailability"},{"kind":13,"line":915,"name":"$end","containerName":"checkRoomAvailability"},{"kind":13,"name":"$dbh","definition":"my","localvar":"my","line":920,"containerName":"checkRoomAvailability"},{"containerName":"checkRoomAvailability","name":"dbh","kind":12,"line":920},{"definition":"my","localvar":"my","kind":13,"name":"$sth","containerName":"checkRoomAvailability","line":923},{"line":925,"containerName":"checkRoomAvailability","kind":13,"name":"$query","definition":"my","localvar":"my"},{"line":933,"kind":13,"name":"$sth","containerName":"checkRoomAvailability"},{"name":"$dbh","kind":13,"line":933,"containerName":"checkRoomAvailability"},{"kind":12,"line":933,"name":"prepare","containerName":"checkRoomAvailability"},{"containerName":"checkRoomAvailability","line":933,"kind":13,"name":"$query"},{"containerName":"checkRoomAvailability","line":934,"localvar":"my","definition":"my","name":"$count","kind":13},{"name":"$sth","kind":13,"line":934,"containerName":"checkRoomAvailability"},{"kind":12,"line":934,"name":"execute","containerName":"checkRoomAvailability"},{"name":"$count","kind":13,"line":936,"containerName":"checkRoomAvailability"}],"signature":{"label":"checkRoomAvailability($room_id,$start,$end)","documentation":"","parameters":[{"label":"$room_id"},{"label":"$start"},{"label":"$end"}]},"line":910,"range":{"end":{"character":9999,"line":941},"start":{"line":910,"character":0}},"containerName":"main::"},{"line":920,"kind":12,"name":"C4","containerName":"Context"},{"range":{"start":{"line":943,"character":0},"end":{"character":9999,"line":985}},"line":943,"containerName":"main::","name":"getAvailableRooms","kind":12,"detail":"($start,$end,$capacity,$equipment)","signature":{"documentation":"","label":"getAvailableRooms($start,$end,$capacity,$equipment)","parameters":[{"label":"$start"},{"label":"$end"},{"label":"$capacity"},{"label":"$equipment"}]},"definition":"sub","children":[{"localvar":"my","definition":"my","name":"$start","kind":13,"containerName":"getAvailableRooms","line":945},{"kind":13,"line":945,"name":"$end","containerName":"getAvailableRooms"},{"containerName":"getAvailableRooms","name":"$capacity","kind":13,"line":945},{"line":945,"kind":13,"name":"$equipment","containerName":"getAvailableRooms"},{"name":"$dbh","kind":13,"localvar":"my","definition":"my","line":948,"containerName":"getAvailableRooms"},{"containerName":"getAvailableRooms","name":"dbh","line":948,"kind":12},{"localvar":"my","definition":"my","name":"$sth","kind":13,"containerName":"getAvailableRooms","line":951},{"name":"$query","kind":13,"localvar":"my","definition":"my","line":953,"containerName":"getAvailableRooms"},{"kind":13,"line":964,"name":"$equipment","containerName":"getAvailableRooms"},{"containerName":"getAvailableRooms","line":967,"definition":"my","localvar":"my","kind":13,"name":"$totalElements"},{"kind":13,"line":967,"name":"$equipment","containerName":"getAvailableRooms"},{"containerName":"getAvailableRooms","line":969,"kind":13,"name":"$query"},{"line":973,"containerName":"getAvailableRooms","name":"$piece","kind":13,"localvar":"my","definition":"my"},{"name":"$equipment","line":973,"kind":13,"containerName":"getAvailableRooms"},{"containerName":"getAvailableRooms","kind":13,"line":975,"name":"$totalElements"},{"name":"$query","kind":13,"line":977,"containerName":"getAvailableRooms"},{"kind":13,"line":980,"name":"$query","containerName":"getAvailableRooms"},{"line":983,"kind":13,"name":"$totalElements","containerName":"getAvailableRooms"}]},{"name":"C4","kind":12,"line":948,"containerName":"Context"},{"containerName":null,"name":"$query","kind":13,"line":987},{"name":"$sth","line":989,"kind":13,"containerName":null},{"containerName":null,"line":989,"kind":13,"name":"$dbh"},{"name":"prepare","kind":12,"line":989,"containerName":"main::"},{"containerName":null,"kind":13,"line":989,"name":"$query"},{"kind":13,"line":990,"name":"$sth","containerName":null},{"containerName":"main::","line":990,"kind":12,"name":"execute"},{"localvar":"my","definition":"my","name":"@allAvailableRooms","kind":13,"containerName":null,"line":992},{"containerName":null,"line":994,"definition":"my","localvar":"my","kind":13,"name":"$row"},{"kind":13,"line":994,"name":"$sth","containerName":null},{"containerName":"main::","line":994,"kind":12,"name":"fetchrow_hashref"},{"line":995,"kind":13,"name":"@allAvailableRooms","containerName":null},{"line":995,"kind":13,"name":"$row","containerName":null},{"name":"@allAvailableRooms","kind":13,"line":998,"containerName":null},{"containerName":"main::","line":1001,"range":{"start":{"line":1001,"character":0},"end":{"character":9999,"line":1024}},"definition":"sub","children":[{"line":1004,"containerName":"loadAllMaxCapacities","kind":13,"name":"$dbh","definition":"my","localvar":"my"},{"containerName":"loadAllMaxCapacities","name":"dbh","kind":12,"line":1004},{"localvar":"my","definition":"my","name":"$sth","kind":13,"containerName":"loadAllMaxCapacities","line":1007},{"containerName":"loadAllMaxCapacities","line":1009,"definition":"my","localvar":"my","kind":13,"name":"$query"},{"containerName":"loadAllMaxCapacities","kind":13,"line":1014,"name":"$sth"},{"name":"$dbh","line":1014,"kind":13,"containerName":"loadAllMaxCapacities"},{"containerName":"loadAllMaxCapacities","line":1014,"kind":12,"name":"prepare"},{"containerName":"loadAllMaxCapacities","line":1014,"kind":13,"name":"$query"},{"name":"$sth","line":1015,"kind":13,"containerName":"loadAllMaxCapacities"},{"name":"execute","line":1015,"kind":12,"containerName":"loadAllMaxCapacities"},{"containerName":"loadAllMaxCapacities","line":1017,"definition":"my","localvar":"my","kind":13,"name":"@allMaxCapacities"},{"containerName":"loadAllMaxCapacities","line":1019,"localvar":"my","definition":"my","name":"$row","kind":13},{"containerName":"loadAllMaxCapacities","name":"$sth","kind":13,"line":1019},{"kind":12,"line":1019,"name":"fetchrow_hashref","containerName":"loadAllMaxCapacities"},{"containerName":"loadAllMaxCapacities","name":"@allMaxCapacities","kind":13,"line":1020},{"containerName":"loadAllMaxCapacities","line":1020,"kind":13,"name":"$row"},{"name":"@allMaxCapacities","kind":13,"line":1023,"containerName":"loadAllMaxCapacities"}],"kind":12,"name":"loadAllMaxCapacities"},{"containerName":"Context","name":"C4","kind":12,"line":1004},{"name":"loadAllEquipment","kind":12,"definition":"sub","children":[{"localvar":"my","definition":"my","name":"$dbh","kind":13,"containerName":"loadAllEquipment","line":1029},{"kind":12,"line":1029,"name":"dbh","containerName":"loadAllEquipment"},{"localvar":"my","definition":"my","name":"$sth","kind":13,"containerName":"loadAllEquipment","line":1032},{"line":1034,"containerName":"loadAllEquipment","kind":13,"name":"$query","definition":"my","localvar":"my"},{"containerName":"loadAllEquipment","line":1039,"kind":13,"name":"$sth"},{"name":"$dbh","line":1039,"kind":13,"containerName":"loadAllEquipment"},{"line":1039,"kind":12,"name":"prepare","containerName":"loadAllEquipment"},{"name":"$query","kind":13,"line":1039,"containerName":"loadAllEquipment"},{"containerName":"loadAllEquipment","name":"$sth","kind":13,"line":1040},{"name":"execute","line":1040,"kind":12,"containerName":"loadAllEquipment"},{"line":1042,"containerName":"loadAllEquipment","kind":13,"name":"@allAvailableEquipmentNames","definition":"my","localvar":"my"},{"name":"$row","kind":13,"localvar":"my","definition":"my","line":1044,"containerName":"loadAllEquipment"},{"containerName":"loadAllEquipment","name":"$sth","line":1044,"kind":13},{"containerName":"loadAllEquipment","name":"fetchrow_hashref","kind":12,"line":1044},{"line":1045,"kind":13,"name":"@allAvailableEquipmentNames","containerName":"loadAllEquipment"},{"line":1045,"kind":13,"name":"$row","containerName":"loadAllEquipment"},{"kind":13,"line":1048,"name":"@allAvailableEquipmentNames","containerName":"loadAllEquipment"}],"range":{"end":{"character":9999,"line":1049},"start":{"character":0,"line":1026}},"line":1026,"containerName":"main::"},{"containerName":"Context","name":"C4","kind":12,"line":1029},{"name":"getAllRooms","kind":12,"children":[{"containerName":"getAllRooms","line":1054,"definition":"my","localvar":"my","kind":13,"name":"$dbh"},{"containerName":"getAllRooms","kind":12,"line":1054,"name":"dbh"},{"name":"$sth","kind":13,"localvar":"my","definition":"my","line":1057,"containerName":"getAllRooms"},{"containerName":"getAllRooms","line":1059,"definition":"my","localvar":"my","kind":13,"name":"$query"},{"containerName":"getAllRooms","name":"$sth","kind":13,"line":1064},{"name":"$dbh","line":1064,"kind":13,"containerName":"getAllRooms"},{"name":"prepare","line":1064,"kind":12,"containerName":"getAllRooms"},{"name":"$query","kind":13,"line":1064,"containerName":"getAllRooms"},{"line":1065,"kind":13,"name":"$sth","containerName":"getAllRooms"},{"name":"execute","line":1065,"kind":12,"containerName":"getAllRooms"},{"localvar":"my","definition":"my","name":"@allRooms","kind":13,"containerName":"getAllRooms","line":1067},{"line":1069,"containerName":"getAllRooms","kind":13,"name":"$row","definition":"my","localvar":"my"},{"containerName":"getAllRooms","name":"$sth","kind":13,"line":1069},{"name":"fetchrow_hashref","kind":12,"line":1069,"containerName":"getAllRooms"},{"kind":13,"line":1070,"name":"@allRooms","containerName":"getAllRooms"},{"name":"$row","line":1070,"kind":13,"containerName":"getAllRooms"},{"containerName":"getAllRooms","name":"@allRooms","kind":13,"line":1073}],"definition":"sub","range":{"start":{"character":0,"line":1051},"end":{"line":1074,"character":9999}},"line":1051,"containerName":"main::"},{"containerName":"Context","name":"C4","kind":12,"line":1054},{"name":"getAllRoomsWithEquipment","kind":12,"definition":"sub","children":[{"containerName":"getAllRoomsWithEquipment","line":1079,"localvar":"my","definition":"my","name":"$dbh","kind":13},{"containerName":"getAllRoomsWithEquipment","name":"dbh","line":1079,"kind":12},{"definition":"my","localvar":"my","kind":13,"name":"$sth","containerName":"getAllRoomsWithEquipment","line":1082},{"line":1083,"containerName":"getAllRoomsWithEquipment","name":"$sth2","kind":13,"localvar":"my","definition":"my"},{"localvar":"my","definition":"my","name":"$query","kind":13,"containerName":"getAllRoomsWithEquipment","line":1085},{"containerName":"getAllRoomsWithEquipment","name":"$sth","kind":13,"line":1090},{"containerName":"getAllRoomsWithEquipment","name":"$dbh","line":1090,"kind":13},{"kind":12,"line":1090,"name":"prepare","containerName":"getAllRoomsWithEquipment"},{"containerName":"getAllRoomsWithEquipment","line":1090,"kind":13,"name":"$query"},{"containerName":"getAllRoomsWithEquipment","line":1091,"kind":13,"name":"$sth"},{"containerName":"getAllRoomsWithEquipment","line":1091,"kind":12,"name":"execute"},{"containerName":"getAllRoomsWithEquipment","line":1093,"definition":"my","localvar":"my","kind":13,"name":"@allRooms"},{"containerName":"getAllRoomsWithEquipment","line":1095,"definition":"my","localvar":"my","kind":13,"name":"$row"},{"containerName":"getAllRoomsWithEquipment","line":1095,"kind":13,"name":"$sth"},{"name":"fetchrow_hashref","kind":12,"line":1095,"containerName":"getAllRoomsWithEquipment"},{"kind":13,"name":"$roomid","definition":"my","localvar":"my","line":1096,"containerName":"getAllRoomsWithEquipment"},{"kind":13,"line":1096,"name":"$row","containerName":"getAllRoomsWithEquipment"},{"containerName":"getAllRoomsWithEquipment","name":"$query","kind":13,"line":1097},{"name":"$sth2","line":1104,"kind":13,"containerName":"getAllRoomsWithEquipment"},{"containerName":"getAllRoomsWithEquipment","line":1104,"kind":13,"name":"$dbh"},{"containerName":"getAllRoomsWithEquipment","line":1104,"kind":12,"name":"prepare"},{"line":1104,"kind":13,"name":"$query","containerName":"getAllRoomsWithEquipment"},{"containerName":"getAllRoomsWithEquipment","kind":13,"line":1105,"name":"$sth2"},{"name":"execute","kind":12,"line":1105,"containerName":"getAllRoomsWithEquipment"},{"localvar":"my","definition":"my","name":"@equipment","kind":13,"containerName":"getAllRoomsWithEquipment","line":1106},{"containerName":"getAllRoomsWithEquipment","line":1107,"localvar":"my","definition":"my","name":"$row2","kind":13},{"containerName":"getAllRoomsWithEquipment","name":"$sth2","kind":13,"line":1107},{"kind":12,"line":1107,"name":"fetchrow_hashref","containerName":"getAllRoomsWithEquipment"},{"containerName":"getAllRoomsWithEquipment","line":1108,"kind":13,"name":"@equipment"},{"name":"$row2","line":1108,"kind":13,"containerName":"getAllRoomsWithEquipment"},{"name":"$row","kind":13,"line":1111,"containerName":"getAllRoomsWithEquipment"},{"name":"@equipment","kind":13,"line":1111,"containerName":"getAllRoomsWithEquipment"},{"containerName":"getAllRoomsWithEquipment","name":"@allRooms","line":1112,"kind":13},{"containerName":"getAllRoomsWithEquipment","name":"$row","line":1112,"kind":13},{"line":1115,"kind":13,"name":"@allRooms","containerName":"getAllRoomsWithEquipment"}],"range":{"end":{"line":1116,"character":9999},"start":{"character":0,"line":1076}},"line":1076,"containerName":"main::"},{"line":1079,"kind":12,"name":"C4","containerName":"Context"},{"name":"roomid","kind":12,"line":1096},{"name":"equipment","line":1111,"kind":12},{"line":1118,"range":{"end":{"character":9999,"line":1123},"start":{"line":1118,"character":0}},"containerName":"main::","kind":12,"name":"getCurrentTimestamp","children":[{"line":1120,"containerName":"getCurrentTimestamp","kind":13,"name":"$timestamp","definition":"my","localvar":"my"},{"kind":13,"line":1122,"name":"$timestamp","containerName":"getCurrentTimestamp"}],"definition":"sub"},{"name":"strftime","line":1120,"kind":12},{"containerName":"main::","range":{"end":{"character":9999,"line":1166},"start":{"character":0,"line":1125}},"line":1125,"children":[{"containerName":"getAllOpeningHours","line":1127,"localvar":"my","definition":"my","name":"$convertWeekdays","kind":13},{"kind":13,"line":1128,"name":"$convertWeekdays","containerName":"getAllOpeningHours"},{"name":"$dbh","kind":13,"localvar":"my","definition":"my","line":1130,"containerName":"getAllOpeningHours"},{"containerName":"getAllOpeningHours","kind":12,"line":1130,"name":"dbh"},{"line":1132,"containerName":"getAllOpeningHours","kind":13,"name":"$sth","definition":"my","localvar":"my"},{"containerName":"getAllOpeningHours","line":1134,"definition":"my","localvar":"my","kind":13,"name":"$query"},{"name":"$sth","line":1139,"kind":13,"containerName":"getAllOpeningHours"},{"containerName":"getAllOpeningHours","line":1139,"kind":13,"name":"$dbh"},{"kind":12,"line":1139,"name":"prepare","containerName":"getAllOpeningHours"},{"containerName":"getAllOpeningHours","kind":13,"line":1139,"name":"$query"},{"containerName":"getAllOpeningHours","name":"$sth","kind":13,"line":1140},{"name":"execute","line":1140,"kind":12,"containerName":"getAllOpeningHours"},{"containerName":"getAllOpeningHours","line":1142,"localvar":"my","definition":"my","name":"@allOpeningHours","kind":13},{"containerName":"getAllOpeningHours","line":1144,"localvar":"my","definition":"my","name":"$row","kind":13},{"name":"$sth","kind":13,"line":1144,"containerName":"getAllOpeningHours"},{"containerName":"getAllOpeningHours","kind":12,"line":1144,"name":"fetchrow_hashref"},{"line":1145,"kind":13,"name":"$convertWeekdays","containerName":"getAllOpeningHours"},{"kind":13,"line":1146,"name":"$row","containerName":"getAllOpeningHours"},{"containerName":"getAllOpeningHours","name":"$row","line":1147,"kind":13},{"containerName":"getAllOpeningHours","kind":13,"line":1148,"name":"$row"},{"containerName":"getAllOpeningHours","line":1149,"kind":13,"name":"$row"},{"name":"$row","kind":13,"line":1150,"containerName":"getAllOpeningHours"},{"name":"$row","line":1151,"kind":13,"containerName":"getAllOpeningHours"},{"line":1152,"kind":13,"name":"$row","containerName":"getAllOpeningHours"},{"containerName":"getAllOpeningHours","kind":13,"line":1153,"name":"$row"},{"containerName":"getAllOpeningHours","name":"$row","kind":13,"line":1154},{"containerName":"getAllOpeningHours","kind":13,"line":1155,"name":"$row"},{"containerName":"getAllOpeningHours","line":1156,"kind":13,"name":"$row"},{"containerName":"getAllOpeningHours","name":"$row","kind":13,"line":1157},{"containerName":"getAllOpeningHours","line":1158,"kind":13,"name":"$row"},{"containerName":"getAllOpeningHours","name":"$row","kind":13,"line":1159},{"kind":13,"line":1162,"name":"@allOpeningHours","containerName":"getAllOpeningHours"},{"containerName":"getAllOpeningHours","kind":13,"line":1162,"name":"$row"},{"containerName":"getAllOpeningHours","kind":13,"line":1165,"name":"@allOpeningHours"}],"definition":"sub","name":"getAllOpeningHours","kind":12},{"containerName":"Context","name":"C4","kind":12,"line":1130},{"name":"day","kind":12,"line":1146},{"name":"day","line":1147,"kind":12},{"line":1148,"kind":12,"name":"day"},{"line":1149,"kind":12,"name":"day"},{"name":"day","kind":12,"line":1150},{"name":"day","kind":12,"line":1151},{"name":"day","line":1152,"kind":12},{"name":"day","kind":12,"line":1153},{"name":"day","line":1154,"kind":12},{"kind":12,"line":1155,"name":"day"},{"kind":12,"line":1156,"name":"day"},{"line":1157,"kind":12,"name":"day"},{"name":"day","kind":12,"line":1158},{"kind":12,"line":1159,"name":"day"},{"line":1168,"kind":12,"name":"output_html_with_http_headers"},{"kind":13,"line":1168,"name":"$cgi","containerName":null},{"containerName":null,"line":1168,"kind":13,"name":"$cookie"},{"name":"$template","kind":13,"line":1168,"containerName":null},{"name":"output","kind":12,"line":1168,"containerName":"main::"}],"version":5}